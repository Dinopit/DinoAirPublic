# DinoAir Quick Setup Reference

## TL;DR - Get Started in 5 Minutes

### 1. Copy Environment Template

```bash
cp .env.example .env
```

### 2. Get Your Supabase Credentials

1. Go to [supabase.com](https://supabase.com) ‚Üí Create new project
2. Go to **Settings** ‚Üí **API**
3. Copy these values to your `.env` file:
   * **Project URL** ‚Üí `SUPABASE_URL`
   * **anon public** ‚Üí `SUPABASE_ANON_KEY`
   * **service\_role secret** ‚Üí `SUPABASE_SERVICE_ROLE_KEY`

### 3. Set Database URL

Go to **Settings** ‚Üí **Database** ‚Üí Copy the URI connection string:

```env
DATABASE_URL=postgresql://postgres:your-password@db.your-project-id.supabase.co:5432/postgres
```

### 4. Create Database Tables

Run this SQL in your Supabase **SQL Editor**:

```sql
-- Chat Sessions
CREATE TABLE chat_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  metadata JSONB DEFAULT '{}'::jsonb
);

-- Chat Messages
CREATE TABLE chat_messages (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  session_id UUID NOT NULL REFERENCES chat_sessions(id) ON DELETE CASCADE,
  role TEXT NOT NULL CHECK (role IN ('user', 'assistant', 'system')),
  content TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  metadata JSONB DEFAULT '{}'::jsonb
);

-- Chat Metrics
CREATE TABLE chat_metrics (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  session_id UUID NOT NULL REFERENCES chat_sessions(id) ON DELETE CASCADE,
  model TEXT NOT NULL,
  response_time_ms INTEGER NOT NULL CHECK (response_time_ms >= 0),
  token_count INTEGER NOT NULL CHECK (token_count >= 0),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  metadata JSONB DEFAULT '{}'::jsonb
);

-- DinoAI Main Memory
CREATE TABLE public."DinoAI" (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  CONSTRAINT "DinoAI_pkey" PRIMARY KEY (id)
);
```

### 5. Test & Run

```bash
npm install
npm run db:test
npm start
```

## Your .env File Should Look Like This:

```env
# Server Configuration
PORT=3000
NODE_ENV=development
PUBLIC_URL=http://localhost:3000
CORS_ORIGIN=http://localhost:3000

# Supabase Configuration - REPLACE WITH YOUR VALUES
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=eyJ...your-anon-key...
SUPABASE_SERVICE_ROLE_KEY=eyJ...your-service-role-key...

# Database Configuration - REPLACE WITH YOUR VALUES
DATABASE_URL=postgresql://postgres:your-password@db.your-project-id.supabase.co:5432/postgres

# Session Configuration
SESSION_SECRET=your-secure-random-string-here

# API Configuration
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Socket.io Configuration
SOCKET_CORS_ORIGIN=http://localhost:3000

# Optional: API Key (same as SUPABASE_ANON_KEY)
SUPABASE_API_KEY=eyJ...your-anon-key...
```

## Common Issues

| Problem                                         | Solution                                           |
| ----------------------------------------------- | -------------------------------------------------- |
| `SUPABASE_URL environment variable is required` | Make sure `.env` file exists and has all variables |
| `relation "chat_sessions" does not exist`       | Run the SQL commands in Supabase SQL Editor        |
| `insufficient_privilege`                        | Check your service role key is correct             |
| Connection timeout                              | Verify your Supabase project is active             |

## Need More Help?

* üìñ **Detailed Guide**: See [SETUP.md](setup.md) for step-by-step instructions
* üîß **Supabase Docs**: See [SUPABASE\_INTEGRATION\_DOCUMENTATION.md](../docs/supabase_integration_documentation.md)
* üõ†Ô∏è **Table Setup**: See [DINOAI\_TABLE\_SETUP\_GUIDE.md](../docs/dinoai_table_setup_guide.md)

## Security Reminder

* ‚ö†Ô∏è **Never commit your `.env` file** to version control
* üîí **Keep your service role key secure** - it has admin access
* üîë **Use strong passwords** for your database
* üõ°Ô∏è **Enable Row Level Security** for production use

***

_Ready to go? Run `npm start` and visit http://localhost:3000_
